    <style>
        .label {
    display: block;
    padding: .2em .6em .3em;
    font-size: 100%;
    font-weight: bold;
    line-height: 1;
    color: #333;
    text-align: left;
    white-space: nowrap;
    vertical-align: baseline;
    border-radius: .25em;
}

@media (max-width: 768px){
    .label {
    padding: .2em 0.0em .3em;
}
.contact_wrapper .info {
    padding-left: 16px;
}
}

p{
        padding: 0.4em 0px;
}
    
    .grey-div{
        background-color: #ededed;
        padding: 15px 0px;
    }
    .grey-div .input-group-addon{
        background-color: #d4c9db;
        color: #3f0c5f;
    }
    .grey-div .form-control{
        background-color: #e5dee9;
        color: #3f0c5f;
    }
    .purple-inputgroup .input-group-addon{
        background-color: #d4c9db;
        color: #3f0c5f;
    }
    .purple-inputgroup .form-control{
        background-color: #e5dee9;
        color: #3f0c5f;
    }
    .purple-div{
        background-color: #4e1473;
        color: white !IMPORTANT;
        padding: 15px 0px;
    }
    .purple-div .input-group-addon{
        background-color: #d4c9db;
        color: #3f0c5f;
    }
    .purple-div .label{
        color: #fff;
    }
    .purple-div .form-control{
        background-color: #e5dee9;
        color: #3f0c5f;
    }
 .ui-slider .ui-slider-range {
    background: transparent;
    }
 .ui-slider {
    background: rgba(250,80,37,1);
    background: -moz-linear-gradient(right, rgba(250,80,37,1) 0%, rgba(254,216,66,1) 51%, rgba(132,254,66,1) 100%);
    background: -webkit-gradient(right top, left top, color-stop(0%, rgba(250,80,37,1)), color-stop(51%, rgba(254,216,66,1)), color-stop(100%, rgba(132,254,66,1)));
    background: -webkit-linear-gradient(right, rgba(250,80,37,1) 0%, rgba(254,216,66,1) 51%, rgba(132,254,66,1) 100%);
    background: -o-linear-gradient(right, rgba(250,80,37,1) 0%, rgba(254,216,66,1) 51%, rgba(132,254,66,1) 100%);
    background: -ms-linear-gradient(right, rgba(250,80,37,1) 0%, rgba(254,216,66,1) 51%, rgba(132,254,66,1) 100%);
    background: linear-gradient(to left, rgba(250,80,37,1) 0%, rgba(254,216,66,1) 51%, rgba(132,254,66,1) 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fa5025', endColorstr='#84fe42', GradientType=1 );
    margin: 10px auto;
    }

  .ui-slider .ui-slider-handle {
        border-radius: 50%; 
        box-shadow: 0px 0px 2px #666;
    }
  .ui-slider .ui-slider-handle:focus {
        outline: none;
        border-radius: 50%; 
        box-shadow: 0px 0px 2px #666;
    }
  .ui-slider .ui-state-active {
        background: #4e1473;
    }
  .ui-slider .ui-state-focus {
        background: #4e1473;
        border: none;
    }


   .chartWithMarkerOverlay {
       position: relative;
       width: 100%;
       background: white;
   }
   .highlighted-area{
    position: absolute;
       width: 50px;
       height: 50px;
       background: rgba(200,200,200,0.4);
       pointer-events: none;
   } 
   .overlay-text {
       width: 200px;
       height: 200px;
       position: absolute;
       top: 0px;   /* chartArea top */
       right: 0px; /* chartArea left */
   }
   .estRevdiv_1bp{  background: #c8faab; }
   .estRevdiv_350m_1b{  background: #f1faab; }
   .estRevdiv_100m_350m{  background: #f8c597; }
   .estRevdiv_100mm{  background: #fff; }

   .overlay-marker {
    width: 200px;
    height: 50px;
    position: absolute;
    top: 53px;   /* chartArea top */
    left: 528px; /* chartArea left */
}
   .overlay-legends {
    margin-left: 8vw;
    margin-top: -12vh;
}

   .overlay-legends .estRevleg_1bp .circle{ display: inline-block;margin-right: 5px;margin-top: 10px; margin-bottom: -5px; background: #87fd42; border-radius: 50%; width: 20px; height: 20px; }
   .overlay-legends .estRevleg_350m_1b .circle{ display: inline-block;margin-right: 5px;margin-top: 10px; margin-bottom: -5px; background: #d7ef42; border-radius: 50%; width: 20px; height: 20px; }
   .overlay-legends .estRevleg_100m_350m .circle{ display: inline-block;margin-right: 5px;margin-top: 10px; margin-bottom: -5px; background: #fe9635; border-radius: 50%; width: 20px; height: 20px; }
   .overlay-legends .estRevleg_100mm .circle{ display: inline-block;margin-right: 5px;margin-top: 10px; margin-bottom: -5px; background: #ffffff; border-radius: 50%; width: 20px; height: 20px; border: solid blue 1px;}

   button.close{
    background: #4e1473;
    color: white;
    padding: 7px;
    border-radius: 50%;
    opacity: 1;
   }
   button.close:hover{
    opacity: 0.9;
    color: white;
    text-shadow: 0px 0px 1px #000;
   }
  </style>
    <section id="page_heading">
    <div class="col-md-offset-3 col-md-6">
               <h1 class="title-heading"><strong>feasibility</strong></h1>
               <p class="post-heading"></p>
    </div>
    </section>
   <section id="page_content">
        <div class="container text-left">
            
            <br />
            <div class="col-md-offset-1 col-md-10 contact_wrapper">
            
                    <div class="contact_info info">
                        AVAILABLE MARKETS
                    </div>
                <div class="form-group">
                   <div class="col-md-3">
                       <Label class="label form-label">Primary</Label>
                       <div class="clearfix"></div>
                   </div>
                    <div class="col-md-6 col-md-push-3">
                        <p>Qualified residents who live within an hour's travel time.</p>
                    </div>
                    <div class="col-md-3 col-md-pull-6">
                        <input type="text" id="available-markets-primary" class="form-control number">
                    </div>
                    <div class="clearfix"></div>
                </div>
                <div class="form-group">
                    <div class="col-md-3">
                        <Label class="label form-label">Secondary<Label>
                            <div class="clearfix"></div>
                    </div>
                    <div class="col-md-6 col-md-push-3">
                        <p>Qualified residents who live within one to two hour's travel time.</p>
                    </div>
                    <div class="col-md-3 col-md-pull-6">
                        <input type="text" id="available-markets-secondry" class="form-control number">
                    </div>
                    <div class="clearfix"></div>
                </div>
                <div class="form-group">
                    <div class="col-md-3">
                        <Label class="label form-label">Overnight Tourist<Label>
                            <div class="clearfix"></div>
                    </div>
                    <div class="col-md-6 col-md-push-3">
                        <p>Tourists who are available, typically within an hour's travel time.</p>
                    </div>
                    <div class="col-md-3 col-md-pull-6">
                        <input type="text" id="available-markets-overnight-tourist" class="form-control number">
                    </div>
                    <div class="clearfix"></div>
                </div>


                    <div class="contact_info info">
                        PENETRATION RATE RANGE
                    </div>
                <div class="form-group">
                    <div class="col-md-3">
                        <Label class="label form-label">Primary</Label>
                        <div class="clearfix"></div>
                    </div>
                    <div class="col-md-6 col-md-push-3">
                        <p>Usually between 0 to 40%.</p>
                    </div>
                    <div class="col-md-3 col-md-pull-6">
                        <div class="input-group">
                           <input  type="text" id="penetration-rate-range-primary" class="form-control percantage">
                           <span class="input-group-addon">%</span>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                </div>
                <div class="form-group">
                    <div class="col-md-3">
                        <Label class="label form-label">Secondary<Label>
                            <div class="clearfix"></div>
                    </div>
                    <div class="col-md-6 col-md-push-3">
                        <p>Usually between 0 to 30%.</p>
                    </div>
                    <div class="col-md-3 col-md-pull-6">
                        <div class="input-group">
                           <input  type="text" id="penetration-rate-range-secondary" class="form-control percantage">
                           <span class="input-group-addon">%</span>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                </div>
                <div class="form-group">
                    <div class="col-md-3">
                        <Label class="label form-label">Overnight Tourist<Label>
                            <div class="clearfix"></div>
                    </div>
                    <div class="col-md-6 col-md-push-3">
                        <p>Usually between 0 to 50%.</p>
                    </div>
                    <div class="col-md-3 col-md-pull-6">
                        <div class="input-group">
                           <input  type="text" id="penetration-rate-range-overnight-tourist" class="form-control percantage">
                           <span class="input-group-addon">%</span>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                </div>
                    <div class="contact_info info">
                        ATTENDANCE AND CASH FLOWS
                    </div>
                <div class="form-group grey-div">
                    <div class="col-md-3">
                        <Label class="label form-label">Attendance</Label>
                        <div class="clearfix"></div>
                    </div>
                    <div class="col-md-3">
                           <input  type="text" id="cash-flows-attendance" class="form-control number">
                    </div>
                    <div class="col-md-6">
                        <div id="slider-cash-flows-attendance"></div>
                        <p id="text-cash-flows-attendance">This is a high performing regional park</p>
                    </div>
                    <div class="clearfix"></div>
                </div>
                <div class="form-group">
                    <div class="col-md-3">
                        <Label class="label form-label">Per Cap Expenditures</Label>
                        <div class="clearfix"></div>
                    </div>
                    <div class="col-md-3">
                        <div class="input-group">
                            <span class="input-group-addon">US$</span>
                           <input  type="text" id="cash-flows-per-cap-expenditures" class="form-control money" >
                        </div>
                    </div>
                    <div class="col-md-6">
                        <p>Expected average spending per visitor</p>
                    </div>
                    <div class="clearfix"></div>
                </div>
                <div class="form-group grey-div">
                    <div class="col-md-3">
                        <Label class="label form-label">Total Revenues</Label>
                        <div class="clearfix"></div>
                    </div>
                    <div class="col-md-3">
                        <div class="input-group">
                            <span class="input-group-addon">US$</span>
                           <input  type="text" id="cash-flows-total-revenues" class="form-control money">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div id="slider-cash-flows-total-revenues"></div>
                        <p id="text-cash-flows-total-revenues">..</p>
                        <p><button type="button" style="padding: 0px" data-toggle="modal" data-target="#ChartModal"><img src="<?php echo base_url('assets/images/chart.png') ?>" alt=""></button></p>
                    </div>
                    <div class="clearfix"></div>
                </div>
                <div class="form-group">
                    <div class="col-md-3">
                        <Label class="label form-label">Profit Margin</Label>
                        <div class="clearfix"></div>
                    </div>
                    <div class="col-md-3">
                        <div class="input-group">
                           <input  type="text" id="cash-flows-profit-margin" class="form-control percantage" placeholder="Enter %">
                            <span class="input-group-addon">%</span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <p>Usually between 20-50%</p>
                    </div>
                    <div class="clearfix"></div>
                </div>
                <div class="form-group">
                    <div class="col-md-3">
                        <Label class="label form-label">Operating Profits</Label>
                        <div class="clearfix"></div>
                    </div>
                    <div class="col-md-3">
                        <div class="input-group">
                            <span class="input-group-addon">US$</span>
                           <input  type="text" id="cash-flows-operating-profits" class="form-control money">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <p>&nbsp;</p>
                    </div>
                    <div class="clearfix"></div>
                </div>
                <div class="form-group">
                    <div class="col-md-3">
                        <Label class="label form-label">Capex & Reserve (of revenues)</Label>
                        <div class="clearfix"></div>
                    </div>
                    <div class="col-md-3">
                        <div class="input-group">
                           <input  type="text" id="cash-flows-capex-reserve" class="form-control percantage" placeholder="Enter %">
                            <span class="input-group-addon">%</span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <p>Average annual % of revenues spent on capital expenditures, new rides, attractions, and shows</p>
                    </div>
                    <div class="clearfix"></div>
                </div>
                <div class="form-group">
                    <div class="col-md-3">
                        <Label class="label form-label">Pre-Tax Cash Flows (USD)</Label>
                        <div class="clearfix"></div>
                    </div>
                    <div class="col-md-3">
                        <div class="input-group purple-inputgroup">
                            <span class="input-group-addon">US$</span>
                           <input  type="text" id="cash-flows-pre-tax" class="form-control money">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div id="slider-cash-flows-pre-tax"></div>
                        <p>&nbsp;</p>
                    </div>
                    <div class="clearfix"></div>
                </div>
                <div class="form-group">
                    <div class="col-md-3">
                        <Label class="label form-label">Total Development Cost</Label>
                        <div class="clearfix"></div>
                    </div>
                    <div class="col-md-3">
                        <div class="input-group">
                           <input  type="text" id="cash-flows-total-development-cost" class="form-control number">
                            <span class="input-group-addon">$ millions</span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <p>&nbsp;</p>
                    </div>
                    <div class="clearfix"></div>
                </div>
                <div class="form-group purple-div">
                    <div class="col-md-3">
                        <Label class="label form-label">Total Cash on Cash Return</Label>
                        <div class="clearfix"></div>
                    </div>
                    <div class="col-md-3">
                        <div class="input-group">
                           <input  type="text" id="cash-flows-total-cash-on-cash-return" class="form-control percantage">
                            <span class="input-group-addon">%</span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div id="slider-cash-flows-total-cash-on-cash-return"></div>
                        
                    </div>
                    <div class="clearfix"></div>
                </div>
                
            </div>
         </div>   
   </section>
   
<!-- Modal -->
<div id="ChartModal" class="modal fade" role="dialog">
  <div class="modal-dialog" style="min-width: 80%;">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-body">
        <div class="chartWithMarkerOverlay">

            <div class="highlighted-area estRevdiv_1bp"></div>
            <div class="highlighted-area estRevdiv_350m_1b"></div>
            <div class="highlighted-area estRevdiv_100m_350m"></div>
            <div class="highlighted-area estRevdiv_100mm"></div>
            <div class="overlay-text">
            </div>
            <div class="overlay-marker">
                <div class="yourparkTitle"></div>
                <div class="yourparkVal"></div>
                <img src="<?php echo base_url('assets/images/arrow.png')?>" height="50">
             </div>
            <div id="line-chart-marker" style="width: 100%; min-height: 90vh;"></div>
         <div class="overlay-legends">
            <div class="estRevleg_1bp"><div class="circle"></div> <strong>($1b+)Disney / Universal</strong> <span></span></div>
            <div class="estRevleg_350m_1b"><div class="circle"></div> <strong>($350m-1b)Super-regional, Tier 1</strong> <span></span></div>
            <div class="estRevleg_100m_350m"><div class="circle"></div> <strong>($100m-350m)Regional, Tier 2</strong> <span></span></div>
            <div class="estRevleg_100mm"><div class="circle"></div> <strong>(<$100m)Most of the theme parks / waterparks / indoor parks in the world</strong></div>
         </div>
        </div>
        <button type="button" class="close" data-dismiss="modal"><i class="fa fa-search-minus" aria-hidden="true"></i></button><br><br>
        <div class="clearfix"></div>
      </div>
      
    </div>

  </div>
</div>

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript" src="<?php echo base_url('assets/js/jquery.mask.min.js') ?>"></script>
   <script>
    var ChartData=[];
    var yourRevenueLoc=0;
    maskingactivate();
    document.querySelector('.overlay-marker').style.display='none';
    function maskingactivate(){
      $('.money').mask('000,000,000,000,000', {reverse: true});
      $('.number').mask('000,000,000,000,000', {reverse: true});
      $('.percantage').mask('000.00', {reverse: true});

    }

    var cash_flows_total_revenues_val=0;
    var cash_flows_operating_profits=0;
    var cash_flows_pre_tax=0;

    // $( "#slider-cash-flows-attendance, #slider-cash-flows-total-revenues, #slider-cash-flows-operating-profits, #slider-cash-flows-pre-tax, #slider-cash-flows-total-cash-on-cash-return" ).slider({
    //   orientation: "horizontal",
    //   range: "min",
    //   // max: 255,
    //   // value: 127,
    //   slide: function(){ return true; },
    //   change: function(){ return true; },
    //   classes: {
    //     "ui-slider-handle": "fa-bars"
    //   }
    // });
// $( "#slider-cash-flows-attendance" ).slider({
//               orientation: "horizontal",
//               range: "min",
//               // min:$('#cash-flows-attendance').cleanVal()*0.5,
//               // max: $('#cash-flows-attendance').cleanVal()*1.5,
//               min:10000,
//               max: 25000000,
//               value: 10000,
//               slide: function(){ 
//                 $('#cash-flows-attendance').val($( "#slider-cash-flows-attendance" ).slider('value'));
//                 $('#cash-flows-attendance').change();
//                },
//               change: function(){ 
//                 $('#cash-flows-attendance').val($( "#slider-cash-flows-attendance" ).slider('value'));
//                 $('#cash-flows-attendance').change();
//                },
//               classes: {
//                 "ui-slider-handle": "fa-bars"
//               }
//             });

// $( "#slider-cash-flows-total-revenues" ).slider({
//               orientation: "horizontal",
//               range: "min",
//               // min:$('#cash-flows-total-revenues').cleanVal()*0.5,
//               min:500000,
//               max: 2000000000,
//               // max: $('#cash-flows-total-revenues').cleanVal()*1.5,
//               value: $('#cash-flows-total-revenues').cleanVal(),
//               slide: function(){ 
//                 $('#cash-flows-total-revenues').val($( "#slider-cash-flows-total-revenues" ).slider('value'));
//                 $('#cash-flows-total-revenues').change();
//                },
//               change: function(){ 
//                 $('#cash-flows-total-revenues').val($( "#slider-cash-flows-total-revenues" ).slider('value'));
//                 $('#cash-flows-total-revenues').change();
//                },
//               classes: {
//                 "ui-slider-handle": "fa-bars"
//               }
//             });

function ampsyrprsrt_change(){
    if (
            $('#available-markets-primary').cleanVal()>0 &&
            $('#penetration-rate-range-primary').cleanVal()>0 &&
            $('#available-markets-secondry').cleanVal()>0 &&
            $('#penetration-rate-range-secondary').cleanVal()>0 &&
            $('#available-markets-overnight-tourist').cleanVal()>0 &&
            $('#penetration-rate-range-overnight-tourist').cleanVal()>0
            ){

        var cash_flows_attendance_val=($('#available-markets-primary').cleanVal()*$('#penetration-rate-range-primary').cleanVal()/100)+($('#available-markets-secondry').cleanVal()*$('#penetration-rate-range-secondary').cleanVal()/100)+($('#available-markets-overnight-tourist').cleanVal()*$('#penetration-rate-range-overnight-tourist').cleanVal()/100);
        $('#cash-flows-attendance').val(cash_flows_attendance_val);
        maskingactivate();
        $('#cash-flows-attendance').change();
        // if($('#cash-flows-attendance').cleanVal()!=0){
        //     $( "#slider-cash-flows-attendance" ).slider('value',$('#cash-flows-attendance').cleanVal());
        // }    
        }
}

function textTotalRevenuessel(cash_flows_total_revenues_val_u){
    
    if(cash_flows_total_revenues_val_u>1000000000){
            $('#text-cash-flows-total-revenues').html('Disney/Universal territory')
          }
          else if(cash_flows_total_revenues_val_u>350000000){
            $('#text-cash-flows-total-revenues').html('Super-regional, Tier 1')
          }
          else if(cash_flows_total_revenues_val_u>100000000){
            $('#text-cash-flows-total-revenues').html('Regional, Tier 2')
          }
          else if(cash_flows_total_revenues_val_u>0){
            $('#text-cash-flows-total-revenues').html('Most amusement parks in the world are in this range');
            }
            else{
                $('#text-cash-flows-total-revenues').html('&nbsp;');
            }
}
function textAddtendanceselP(cash_flows_attendance_val_inpu){
    if(cash_flows_attendance_val_inpu>10000000){
            $('#text-cash-flows-attendance').html('Disney/Universal territory')
          }
          else if(cash_flows_attendance_val_inpu>5000000){
            $('#text-cash-flows-attendance').html('World class park')
          }
          else if(cash_flows_attendance_val_inpu>2000000){
            $('#text-cash-flows-attendance').html('High performing regional park')
          }
          else if(cash_flows_attendance_val_inpu>0){
            $('#text-cash-flows-attendance').html('Average amusement park');
            }
          else{
            $('#text-cash-flows-attendance').html('&nbsp;');
          }
}
    $("#available-markets-primary, #available-markets-secondry, #available-markets-overnight-tourist,#penetration-rate-range-primary, #penetration-rate-range-secondary, #penetration-rate-range-overnight-tourist").keyup(function(e){
        $(this).css("background-color","#fff");
        $(this).css("color","#555");
        ampsyrprsrt_change();
    });

    $("#cash-flows-attendance, #cash-flows-per-cap-expenditures").keyup(function(e){
        $(this).css("background-color","#fff");
        $(this).css("color","#555");
    });

    // $('#cash-flows-attendance').keyup(function(e){
    //     $("#available-markets-primary, #available-markets-secondry, #available-markets-overnight-tourist,#penetration-rate-range-primary, #penetration-rate-range-secondary, #penetration-rate-range-overnight-tourist").val('').css("background-color","#ddd");
    // });


    $("#cash-flows-per-cap-expenditures, #cash-flows-attendance").on('change keyup',function(e){
        var cash_flows_attendance_val_inpu=$('#cash-flows-attendance').cleanVal()
        // if(cash_flows_attendance_val_inpu!=$( "#slider-cash-flows-attendance" ).slider('value')){
        //     $( "#slider-cash-flows-attendance" ).slider('value',cash_flows_attendance_val_inpu);
        // }
        var cash_flows_attendance_val=($('#available-markets-primary').cleanVal()*$('#penetration-rate-range-primary').cleanVal()/100)+($('#available-markets-secondry').cleanVal()*$('#penetration-rate-range-secondary').cleanVal()/100)+($('#available-markets-overnight-tourist').cleanVal()*$('#penetration-rate-range-overnight-tourist').cleanVal()/100);
        if(cash_flows_attendance_val_inpu!=cash_flows_attendance_val){
            $("#available-markets-primary, #available-markets-secondry, #available-markets-overnight-tourist,#penetration-rate-range-primary, #penetration-rate-range-secondary, #penetration-rate-range-overnight-tourist").val('').css("background-color","#eee");
        }

        textAddtendanceselP(cash_flows_attendance_val_inpu);

        cash_flows_total_revenues_val=cash_flows_attendance_val_inpu*$('#cash-flows-per-cap-expenditures').val().replace(/,/g, "");
        cash_flows_total_revenues_val=cash_flows_total_revenues_val.toFixed(0);
        
        $('#cash-flows-total-revenues').val(cash_flows_total_revenues_val);
        maskingactivate();
        $('#cash-flows-total-revenues').change();
        // if($('#cash-flows-total-revenues').cleanVal()!=0){
        //     $( "#slider-cash-flows-total-revenues" ).slider('value',$('#cash-flows-total-revenues').cleanVal());
        // }    
    });

    // $("#cash-flows-total-revenues").on('keyup',function(e){
    //     var cash_flows_total_revenues_val_u=$('#cash-flows-total-revenues').cleanVal();
    //     // $('#cash-flows-attendance').change();
    // });
    $("#cash-flows-profit-margin, #cash-flows-total-revenues").on('change keyup',function(e){
        maskingactivate();
        var cash_flows_total_revenues_val_u=$('#cash-flows-total-revenues').val().replace(/,/g, "");
        var cash_flows_profit_margin_val_u=$('#cash-flows-profit-margin').val().replace(/,/g, "");
        cash_flows_operating_profits=cash_flows_total_revenues_val_u*cash_flows_profit_margin_val_u/100;
        cash_flows_operating_profits=cash_flows_operating_profits.toFixed(0);
        // console.log(cash_flows_total_revenues_val_u);
        // console.log(cash_flows_profit_margin_val_u);
        // console.log(cash_flows_operating_profits.toFixed(2));

        if(cash_flows_total_revenues_val_u!=cash_flows_total_revenues_val){
            $("#available-markets-primary, #available-markets-secondry, #available-markets-overnight-tourist,#penetration-rate-range-primary, #penetration-rate-range-secondary, #penetration-rate-range-overnight-tourist, #cash-flows-attendance, #cash-flows-per-cap-expenditures").val('').css("background-color","#eee");
            textAddtendanceselP(0);
        // if(cash_flows_total_revenues_val_u!=$( "#slider-cash-flows-total-revenues" ).slider('value')){
        //     $( "#slider-cash-flows-total-revenues" ).slider('value',cash_flows_total_revenues_val_u);
        // }
        
        }

        if(cash_flows_profit_margin_val_u){
        $("#cash-flows-profit-margin, #cash-flows-operating-profits, #cash-flows-capex-reserve").css("background-color","#fff");
        $("#cash-flows-profit-margin, #cash-flows-operating-profits, #cash-flows-capex-reserve").css("color","#555");
        }

        textTotalRevenuessel(cash_flows_total_revenues_val_u);

        $('#cash-flows-operating-profits').val(cash_flows_operating_profits);
        $('#cash-flows-operating-profits').change();

        if($('#cash-flows-operating-profits').cleanVal()!=0){

        }    
    });

    $("#cash-flows-capex-reserve, #cash-flows-operating-profits").on('change keyup',function(e){
            maskingactivate();
        var cash_flows_operating_profits_val_u=$('#cash-flows-operating-profits').val().replace(/,/g, "");
        var cash_flows_capex_reserve_val_u=$('#cash-flows-capex-reserve').val().replace(/,/g, "");

        if(cash_flows_operating_profits!=cash_flows_operating_profits_val_u){
            $("#available-markets-primary, #available-markets-secondry, #available-markets-overnight-tourist,#penetration-rate-range-primary, #penetration-rate-range-secondary, #penetration-rate-range-overnight-tourist, #cash-flows-attendance, #cash-flows-per-cap-expenditures, #cash-flows-total-revenues, #cash-flows-profit-margin").val('').css("background-color","#eee");
            textTotalRevenuessel(0);
        }
        
          if(cash_flows_operating_profits_val_u || cash_flows_capex_reserve_val_u){
             $("#cash-flows-operating-profits, #cash-flows-capex-reserve").css("background-color","#fff");
             $("#cash-flows-operating-profits, #cash-flows-capex-reserve").css("color","#555");
            }

        if(cash_flows_capex_reserve_val_u>0){
            cash_flows_pre_tax=cash_flows_operating_profits_val_u*(1-(cash_flows_capex_reserve_val_u/100));
            cash_flows_pre_tax=cash_flows_pre_tax.toFixed(0);;
            $('#cash-flows-pre-tax').val(cash_flows_pre_tax);
            $('#cash-flows-pre-tax').change();

            if($('#cash-flows-pre-tax').cleanVal()!=0){

            }    
        }
    });

    $("#cash-flows-total-development-cost, #cash-flows-pre-tax").on('change keyup',function(e){
        maskingactivate();
        var cash_flows_pre_tax_val_u=$('#cash-flows-pre-tax').val().replace(/,/g, "");
        var cash_flows_total_development_cost_val_u=$('#cash-flows-total-development-cost').val().replace(/,/g, "")*1000000;
        var cash_flows_total_cash_on_cash_return=(cash_flows_pre_tax_val_u/cash_flows_total_development_cost_val_u)*100;


        console.log(cash_flows_pre_tax);
        console.log(cash_flows_pre_tax_val_u);

        if(cash_flows_pre_tax!=cash_flows_pre_tax_val_u){
            $("#available-markets-primary, #available-markets-secondry, #available-markets-overnight-tourist,#penetration-rate-range-primary, #penetration-rate-range-secondary, #penetration-rate-range-overnight-tourist, #cash-flows-attendance, #cash-flows-per-cap-expenditures, #cash-flows-total-revenues, #cash-flows-profit-margin,#cash-flows-operating-profits ,#cash-flows-capex-reserve").val('').css("background-color","#eee");
        }
        

        // var cash_flows_total_cash_on_cash_return=(cash_flows_pre_tax_val_u/$('#cash-flows-total-development-cost').cleanVal())*100;     //10,00,000
        $('#cash-flows-total-cash-on-cash-return').val(cash_flows_total_cash_on_cash_return.toFixed(2));
        $('#cash-flows-total-cash-on-cash-return').change();
    });
function roundtothousandth($num){
    return Math.round($num/1000)*1000;
}
function roundtotenthousandth($num){
    return Math.round($num/10000)*10000;
}
google.charts.load("current", {packages:['corechart']});
    // google.charts.setOnLoadCallback(drawChart);
    function drawChart() {

      var estRevdata =[['Name','Revenue($)']];
      var estRevdata_1bp =[];
      var estRevdata_350m_1b =[];
      var estRevdata_100m_350m =[];
      var estRevdata_100mm =[];
      var cash_flows_total_revenues_val_u=Number($('#cash-flows-total-revenues').val().replace(/,/g, ""));
      estRevdata.push(["Your Park Revenue",cash_flows_total_revenues_val_u]);
      $.each(ChartData,function(k,val){
        if(parseInt(val["att"])>0 && parseFloat(val["tkt"])>0 ){
        var tempArrEstRev=(parseFloat(val["tkt"])*parseInt(val["att"]));

        if(tempArrEstRev>99999){
            tempArrEstRev=roundtotenthousandth(tempArrEstRev);
        }else if(tempArrEstRev>9999){
            tempArrEstRev=roundtothousandth(tempArrEstRev);
        }

        var tempArr = [val["name"],tempArrEstRev];
        estRevdata.push(tempArr);
            if(tempArr[1]>=1000000000){
                estRevdata_1bp.push(tempArr);
            }
            if(tempArr[1]>=350000000 && tempArr[1]<1000000000){
                estRevdata_350m_1b.push(tempArr);
            }
            if(tempArr[1]>=100000000 && tempArr[1]<350000000){
                estRevdata_100m_350m.push(tempArr);
            }
            if(tempArr[1]<100000000){
                estRevdata_100mm.push(tempArr);
            }
        }
      });   
      estRevdata.sort(sortRevenueFunction);
      estRevdata_1bp.sort(sortRevenueFunction);
      estRevdata_350m_1b.sort(sortRevenueFunction);
      estRevdata_100m_350m.sort(sortRevenueFunction);
      var indexYourRevenue=getIndexOfK(estRevdata, "Your Park Revenue");
      
    // console.log(estRevdata_100mm);
    // estRevdiv_100mm
      var data = new google.visualization.arrayToDataTable(estRevdata);
      var options = {
        legend: 'none',
        colors: ['#760946'],
        lineWidth: 4,
        backgroundColor:'transparent',
        animation:{startup: true},
        hAxis: {textPosition: 'none'},
        // chartArea: {'width': '80%', 'height': '80%'},
        vAxis: {title: 'Estimated Revenues ($)',fontName:'Raleway',gridlines: { count: 8 },textPosition: 'top' }
      };

      function placeMarker(dataTable) {

        var cli = this.getChartLayoutInterface();
        var chartArea = cli.getChartAreaBoundingBox();
        // "estRevdiv_1bp" is element #1.
        document.querySelector('.estRevdiv_1bp').style.top = Math.floor(cli.getYLocation(dataTable.getValue(0, 1))) - 0 + "px";
        document.querySelector('.estRevdiv_1bp').style.left = Math.floor(cli.getXLocation(0))-Math.floor(cli.getBoundingBox('bar#0#0').width/2) + "px";
        document.querySelector('.estRevdiv_1bp').style.width = Math.floor(cli.getXLocation(estRevdata_1bp.length-1)) - Math.floor(cli.getXLocation(0)) + Math.floor(cli.getBoundingBox('bar#0#11').width) + "px";
        document.querySelector('.estRevdiv_1bp').style.height =Math.floor(cli.getBoundingBox('bar#0#0').height) + "px";

        // "estRevdiv_350m_1b" is element #2.
        document.querySelector('.estRevdiv_350m_1b').style.top = Math.floor(cli.getYLocation(dataTable.getValue(estRevdata_1bp.length, 1))) - 0 + "px";
        document.querySelector('.estRevdiv_350m_1b').style.left = Math.floor(cli.getXLocation(estRevdata_1bp.length))-Math.floor(cli.getBoundingBox('bar#0#'+estRevdata_1bp.length).width) + "px";
        document.querySelector('.estRevdiv_350m_1b').style.width = Math.floor(cli.getXLocation(estRevdata_1bp.length+estRevdata_350m_1b.length-1)) - Math.floor(cli.getXLocation(estRevdata_1bp.length)) + Math.floor(2*cli.getBoundingBox('bar#0#'+estRevdata_1bp.length).width) + "px";
        document.querySelector('.estRevdiv_350m_1b').style.height =Math.floor(cli.getBoundingBox( 'bar#0#'+estRevdata_1bp.length).height) + "px";

        // "estRevdiv_100m_350m" is element #3.
        document.querySelector('.estRevdiv_100m_350m').style.top = Math.floor(cli.getYLocation(dataTable.getValue(estRevdata_1bp.length+estRevdata_350m_1b.length, 1))) - 0 + "px";
        document.querySelector('.estRevdiv_100m_350m').style.left = Math.floor(cli.getXLocation(estRevdata_1bp.length+estRevdata_350m_1b.length))-Math.floor(cli.getBoundingBox('bar#0#'+estRevdata_350m_1b.length).width) + "px";
        document.querySelector('.estRevdiv_100m_350m').style.width = Math.floor(cli.getXLocation(estRevdata_100m_350m.length+estRevdata_1bp.length+estRevdata_350m_1b.length)) - Math.floor(cli.getXLocation(estRevdata_1bp.length+estRevdata_350m_1b.length)) + Math.floor(cli.getBoundingBox('bar#0#'+(estRevdata_1bp.length+estRevdata_350m_1b.length)).width) + "px";
        document.querySelector('.estRevdiv_100m_350m').style.height =Math.floor(cli.getBoundingBox('bar#0#'+(estRevdata_1bp.length+estRevdata_350m_1b.length)).height) + "px";

        document.querySelector('.estRevleg_1bp span').innerText=estRevdata_1bp[0][0]+', '+estRevdata_1bp[1][0]+', '+estRevdata_1bp[2][0]+' & '+(estRevdata_1bp.length-3)+' more';
        document.querySelector('.estRevleg_350m_1b span').innerText=estRevdata_350m_1b[0][0]+', '+estRevdata_350m_1b[1][0]+', '+estRevdata_350m_1b[2][0]+' & '+(estRevdata_350m_1b.length-3)+' more';
        document.querySelector('.estRevleg_100m_350m span').innerText=estRevdata_100m_350m[0][0]+', '+estRevdata_100m_350m[1][0]+', '+estRevdata_100m_350m[2][0]+' & '+(estRevdata_100m_350m.length-3)+' more';

        if(dataTable.getValue(indexYourRevenue[0]-1, 1)<1){
            document.querySelector('.overlay-marker').style.display='none';
        }else{
            document.querySelector('.overlay-marker').style.display='block';
        }
            

         // "Zombies" is element #5.
        document.querySelector('.overlay-marker').style.top = Math.floor(cli.getYLocation(dataTable.getValue(indexYourRevenue[0]-1, 1))) - 63 + "px";
        document.querySelector('.overlay-marker').style.left = Math.floor(cli.getXLocation(indexYourRevenue[0]-1)) - 10 + "px";
        document.querySelector('.yourparkTitle').innerText=dataTable.getValue(indexYourRevenue[0]-1, 0);
        // document.querySelector('.yourparkVal').innerText=dataTable.getValue(indexYourRevenue[0]-1, 1);
        

        document.querySelector('.overlay-text').style.top = Math.floor(cli.getYLocation(dataTable.getValue(0, 1)));
        document.querySelector('.overlay-text').style.right = Math.floor(cli.getXLocation(0));
      };

      var chart = new google.visualization.ColumnChart(document.getElementById('line-chart-marker'));
      google.visualization.events.addListener(chart, 'ready',
        placeMarker.bind(chart, data));
      chart.draw(data, options);
    }

    $("#ChartModal").on('show.bs.modal', function(){
         $.ajax({
           "type": "POST",
           url:'<?php echo site_url('pages/getParksWithData'); ?>',
           dataType:'json',
           async:true,
           success:function(result){
               if(result.status==1){
                 ChartData = result.ParksWithData;
                 drawChart();
               }
               first = 0;
           } 
         });
    });


    function sortRevenueFunction(a, b) {
        
        if (a[1] === b[1]) {
            return 0;
        }
        else {
            return (a[1] > b[1]) ? -1 : 1;
        }
    }
function getIndexOfK(arr, k) {
  for (var i = 0; i < arr.length; i++) {
    var index = arr[i].indexOf(k);
    if (index > -1) {
      return [i, index];
    }
  }
}

$(document).ready(function (e){
$('#available-markets-primary').val('2000000').css("color", "lightgrey");
$('#available-markets-secondry').val('2000000').css("color", "lightgrey");
$('#available-markets-overnight-tourist').val('1000000').css("color", "lightgrey");
$('#penetration-rate-range-primary').val('30').css("color", "lightgrey");
$('#penetration-rate-range-secondary').val('20').css("color", "lightgrey");
$('#penetration-rate-range-overnight-tourist').val('30').css("color", "lightgrey");
$('#cash-flows-per-cap-expenditures').val('10').css("color", "lightgrey");
// $('#available-markets-primary').delay("slow").keyup();
    ampsyrprsrt_change();
});
   </script>